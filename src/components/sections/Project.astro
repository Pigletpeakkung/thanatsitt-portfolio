---
// üé® Projects Section - The Alchemical Gallery (Enhanced)
import Button from '@ui/Button.astro';
---

<section id="projects" class="relative py-20 overflow-hidden">
  <!-- üåå Subtle Background Pattern (works with Stars) -->
  <div class="absolute inset-0 opacity-20 pointer-events-none">
    <div class="absolute inset-0 bg-gradient-to-br from-alchemy-50/30 via-transparent to-mirror-50/30 dark:from-alchemy-900/20 dark:via-transparent dark:to-mirror-900/20"></div>
    <!-- ‚ú® Floating Geometric Shapes -->
    <div class="absolute top-20 left-10 w-16 h-16 border border-alchemy-300 dark:border-alchemy-700 rotate-45 opacity-30"></div>
    <div class="absolute bottom-32 right-20 w-12 h-12 border border-mirror-300 dark:border-mirror-700 rounded-full opacity-20"></div>
    <div class="absolute top-1/2 right-10 w-8 h-8 bg-sage-300 dark:bg-sage-700 rotate-12 opacity-25"></div>
  </div>

  <div class="container-lg relative z-10">
    <!-- üéØ Enhanced Section Header -->
    <div class="text-center mb-20" id="projects-header">
      <div class="inline-block mb-6">
        <div class="glass-alchemy px-6 py-3 rounded-full mb-4">
          <span class="text-sm font-semibold text-alchemy-600 dark:text-alchemy-400 tracking-wider uppercase">
            üé® Digital Manifestations
          </span>
        </div>
      </div>
      
      <h2 class="text-4xl md:text-5xl lg:text-6xl font-heading font-bold mb-6">
        <span class="text-gradient-alchemy">The Gallery</span> 
        <span class="text-luna-800 dark:text-luna-200">of Creation</span>
      </h2>
      
      <p class="text-xl md:text-2xl text-luna-600 dark:text-luna-300 max-w-3xl mx-auto leading-relaxed">
        Each project is a <em class="text-alchemy-600 dark:text-alchemy-400">ritual of transformation</em>, 
        a digital manifestation of archetypal energies working in harmony.
      </p>
    </div>
    
    <!-- üé≠ Enhanced Projects Grid -->
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 mb-16" id="projects-grid">
      <!-- üåô Project Card 1 - Holy Bless -->
      <div class="project-card card card-hover group relative" data-project="holy-bless">
        <!-- üñºÔ∏è Enhanced Project Image -->
        <div class="aspect-video bg-gradient-to-br from-alchemy-100 to-alchemy-200 dark:from-alchemy-800 dark:to-alchemy-900 rounded-t-2xl relative overflow-hidden">
          <!-- üåü Project Icon with Animation -->
          <div class="absolute inset-0 flex items-center justify-center">
            <div class="text-6xl group-hover:scale-110 transition-transform duration-500 group-hover:rotate-12">
              üåô
            </div>
          </div>
          
          <!-- üé≠ Hover Overlay -->
          <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500">
            <div class="absolute bottom-4 left-4 right-4">
              <div class="glass-alchemy p-3 rounded-lg">
                <p class="text-white text-sm font-medium">Sacred Geometry ‚Ä¢ Digital Ritual</p>
              </div>
            </div>
          </div>
          
          <!-- ‚ú® Floating Particles -->
          <div class="absolute top-2 right-2 w-2 h-2 bg-alchemy-400 rounded-full animate-pulse opacity-60"></div>
          <div class="absolute bottom-4 left-2 w-1 h-1 bg-alchemy-300 rounded-full animate-pulse opacity-80" style="animation-delay: 1s;"></div>
        </div>
        
        <!-- üìù Enhanced Card Content -->
        <div class="p-6 glass-alchemy">
          <div class="flex items-start justify-between mb-3">
            <h3 class="text-xl font-heading font-bold text-alchemy-800 dark:text-alchemy-200">
              Holy Bless
            </h3>
            <div class="text-sm text-alchemy-600 dark:text-alchemy-400 opacity-70">
              2024
            </div>
          </div>
          
          <p class="text-luna-600 dark:text-luna-300 text-sm mb-4 leading-relaxed">
            Digital blessing and ritual interface combining <strong>sacred geometry</strong> with modern UX, 
            creating a bridge between ancient wisdom and contemporary technology.
          </p>
          
          <!-- üè∑Ô∏è Enhanced Tags -->
          <div class="flex flex-wrap gap-2 mb-6">
            <span class="tag-alchemy">React</span>
            <span class="tag-mirror">Sacred Design</span>
            <span class="tag-sage">Spiritual UX</span>
          </div>
          
          <!-- üîó Action Buttons -->
          <div class="flex gap-3">
            <Button variant="alchemy" size="sm" href="https://pigletpeakkung.github.io/Holy-bless/" class="flex-1">
              <span class="flex items-center justify-center gap-2">
                üîÆ <span>View Live</span>
              </span>
            </Button>
            <Button variant="ghost" size="sm" href="#" class="px-3">
              <span>üìñ</span>
            </Button>
          </div>
        </div>
      </div>
      
      <!-- üáπüá≠ Project Card 2 - Siam Blessing -->
      <div class="project-card card card-hover group relative" data-project="siam-blessing">
        <div class="aspect-video bg-gradient-to-br from-sage-100 to-sage-200 dark:from-sage-800 dark:to-sage-900 rounded-t-2xl relative overflow-hidden">
          <div class="absolute inset-0 flex items-center justify-center">
            <div class="text-6xl group-hover:scale-110 transition-transform duration-500 group-hover:rotate-6">
              üáπüá≠
            </div>
          </div>
          
          <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500">
            <div class="absolute bottom-4 left-4 right-4">
              <div class="glass-sage p-3 rounded-lg">
                <p class="text-white text-sm font-medium">Thai Heritage ‚Ä¢ Cultural Bridge</p>
              </div>
            </div>
          </div>
          
          <div class="absolute top-2 right-2 w-2 h-2 bg-sage-400 rounded-full animate-pulse opacity-60"></div>
          <div class="absolute bottom-4 left-2 w-1 h-1 bg-sage-300 rounded-full animate-pulse opacity-80" style="animation-delay: 1.5s;"></div>
        </div>
        
        <div class="p-6 glass-sage">
          <div class="flex items-start justify-between mb-3">
            <h3 class="text-xl font-heading font-bold text-sage-800 dark:text-sage-200">
              Siam Blessing
            </h3>
            <div class="text-sm text-sage-600 dark:text-sage-400 opacity-70">
              2024
            </div>
          </div>
          
          <p class="text-luna-600 dark:text-luna-300 text-sm mb-4 leading-relaxed">
            Thai cultural blessing application honoring <strong>traditional wisdom</strong> in digital form, 
            preserving ancestral practices for modern generations.
          </p>
          
          <div class="flex flex-wrap gap-2 mb-6">
            <span class="tag-sage">Thai Culture</span>
            <span class="tag-alchemy">Web App</span>
            <span class="tag-flow">Heritage Tech</span>
          </div>
          
          <div class="flex gap-3">
            <Button variant="sage" size="sm" href="https://pigletpeakkung.github.io/Siam-Blessing/" class="flex-1">
              <span class="flex items-center justify-center gap-2">
                üôè <span>View Live</span>
              </span>
            </Button>
            <Button variant="ghost" size="sm" href="#" class="px-3">
              <span>üìñ</span>
            </Button>
          </div>
        </div>
      </div>
      
      <!-- üí¨ Project Card 3 - Conversation Topics -->
      <div class="project-card card card-hover group relative" data-project="conversation-topics">
        <div class="aspect-video bg-gradient-to-br from-flow-100 to-flow-200 dark:from-flow-800 dark:to-flow-900 rounded-t-2xl relative overflow-hidden">
          <div class="absolute inset-0 flex items-center justify-center">
            <div class="text-6xl group-hover:scale-110 transition-transform duration-500 group-hover:rotate-3">
              üí¨
            </div>
          </div>
          
          <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500">
            <div class="absolute bottom-4 left-4 right-4">
              <div class="glass-flow p-3 rounded-lg">
                <p class="text-white text-sm font-medium">AI Psychology ‚Ä¢ Deep Dialogue</p>
              </div>
            </div>
          </div>
          
          <div class="absolute top-2 right-2 w-2 h-2 bg-flow-400 rounded-full animate-pulse opacity-60"></div>
          <div class="absolute bottom-4 left-2 w-1 h-1 bg-flow-300 rounded-full animate-pulse opacity-80" style="animation-delay: 0.5s;"></div>
        </div>
        
        <div class="p-6 glass-flow">
          <div class="flex items-start justify-between mb-3">
            <h3 class="text-xl font-heading font-bold text-flow-800 dark:text-flow-200">
              Conversation Topics
            </h3>
            <div class="text-sm text-flow-600 dark:text-flow-400 opacity-70">
              2024
            </div>
          </div>
          
          <p class="text-luna-600 dark:text-luna-300 text-sm mb-4 leading-relaxed">
            AI-powered conversation facilitation tool for <strong>meaningful dialogue</strong>, 
            using psychological principles to deepen human connection.
          </p>
          
          <div class="flex flex-wrap gap-2 mb-6">
            <span class="tag-flow">AI</span>
            <span class="tag-mirror">Psychology</span>
            <span class="tag-sage">Communication</span>
          </div>
          
          <div class="flex gap-3">
            <Button variant="flow" size="sm" href="#" class="flex-1">
              <span class="flex items-center justify-center gap-2">
                üß† <span>View Live</span>
              </span>
            </Button>
            <Button variant="ghost" size="sm" href="#" class="px-3">
              <span>üìñ</span>
            </Button>
          </div>
        </div>
      </div>
      
      <!-- üé≠ Additional Project Slots -->
      <div class="project-card card card-hover group relative opacity-60" data-project="coming-soon">
        <div class="aspect-video bg-gradient-to-br from-mirror-100 to-mirror-200 dark:from-mirror-800 dark:to-mirror-900 rounded-t-2xl relative overflow-hidden">
          <div class="absolute inset-0 flex items-center justify-center">
            <div class="text-6xl group-hover:scale-110 transition-transform duration-500">
              ‚ú®
            </div>
          </div>
          
          <div class="absolute inset-0 bg-gradient-to-t from-black/40 to-transparent">
            <div class="absolute bottom-4 left-4 right-4">
              <div class="glass-mirror p-3 rounded-lg">
                <p class="text-white text-sm font-medium">Coming Soon ‚Ä¢ In Development</p>
              </div>
            </div>
          </div>
        </div>
        
        <div class="p-6 glass-mirror">
          <h3 class="text-xl font-heading font-bold text-mirror-800 dark:text-mirror-200 mb-3">
            Next Creation
          </h3>
          <p class="text-luna-600 dark:text-luna-300 text-sm mb-4 leading-relaxed">
            The next manifestation is brewing in the alchemical laboratory of imagination...
          </p>
          <div class="flex flex-wrap gap-2 mb-6">
            <span class="tag-mirror">Mystery</span>
            <span class="tag-alchemy">Innovation</span>
          </div>
          <Button variant="ghost" size="sm" disabled class="w-full">
            <span class="flex items-center justify-center gap-2">
              üîÆ <span>Coming Soon</span>
            </span>
          </Button>
        </div>
      </div>
    </div>
    
    <!-- üåü Enhanced Call to Action -->
    <div class="text-center" id="projects-cta">
      <div class="glass-alchemy p-8 rounded-3xl max-w-2xl mx-auto mb-8">
        <h3 class="text-2xl font-heading font-bold text-alchemy-800 dark:text-alchemy-200 mb-4">
          Explore the Complete Journey
        </h3>
        <p class="text-luna-600 dark:text-luna-300 mb-6">
          Dive deeper into the alchemical process behind each creation, 
          from initial inspiration to final manifestation.
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <Button variant="alchemy" size="lg" href="/portfolio">
            <span class="flex items-center gap-2">
              üé® <span>Full Portfolio</span>
            </span>
          </Button>
          <Button variant="ghost" size="lg" href="#contact">
            <span class="flex items-center gap-2">
              üí¨ <span>Collaborate</span>
            </span>
          </Button>
        </div>
      </div>
    </div>
  </div>

  <!-- üé≠ Project Details Modal Trigger -->
  <div id="project-modal" class="fixed inset-0 bg-black/80 backdrop-blur-sm z-50 opacity-0 pointer-events-none transition-opacity duration-300">
    <div class="flex items-center justify-center min-h-screen p-4">
      <div class="glass-mirror p-8 rounded-3xl max-w-2xl w-full transform scale-95 transition-transform duration-300">
        <div class="flex justify-between items-start mb-6">
          <h3 class="text-2xl font-heading font-bold" id="modal-title">Project Details</h3>
          <button class="text-luna-400 hover:text-luna-600 text-2xl" onclick="closeProjectModal()">√ó</button>
        </div>
        <div id="modal-content">
          <!-- Dynamic content will be inserted here -->
        </div>
      </div>
    </div>
  </div>
</section>

<!-- üé≠ Enhanced GSAP Animations -->
<script>
  document.addEventListener('DOMContentLoaded', () => {
    if (typeof gsap !== 'undefined') {
      // üéØ Projects Section Animation Timeline
      const projectsTl = gsap.timeline({
        scrollTrigger: {
          trigger: "#projects",
          start: "top 80%",
          end: "bottom 20%",
          toggleActions: "play none none reverse"
        }
      });

      // üìù Header Animation
      projectsTl.fromTo("#projects-header", {
        y: 50,
        opacity: 0
      }, {
        y: 0,
        opacity: 1,
        duration: 1,
        ease: "power2.out"
      });

      // üé® Project Cards Staggered Animation
      projectsTl.fromTo(".project-card", {
        y: 60,
        opacity: 0,
        scale: 0.9,
        rotationY: 15
      }, {
        y: 0,
        opacity: 1,
        scale: 1,
        rotationY: 0,
        duration: 0.8,
        stagger: 0.2,
        ease: "back.out(1.7)"
      }, "-=0.5");

      // üåü CTA Animation
      projectsTl.fromTo("#projects-cta", {
        y: 40,
        opacity: 0
      }, {
        y: 0,
        opacity: 1,
        duration: 0.8,
        ease: "power2.out"
      }, "-=0.3");

      // üé≠ Enhanced Card Hover Interactions
      document.querySelectorAll('.project-card').forEach(card => {
        const icon = card.querySelector('.text-6xl');
        
        card.addEventListener('mouseenter', () => {
          if (!card.classList.contains('opacity-60')) {
            gsap.to(card, {
              y: -10,
              scale: 1.02,
              duration: 0.4,
              ease: "power2.out"
            });
            
            gsap.to(icon, {
              scale: 1.1,
              rotation: 10,
              duration: 0.3,
              ease: "back.out(1.7)"
            });
          }
        });

        card.addEventListener('mouseleave', () => {
          gsap.to(card, {
            y: 0,
            scale: 1,
            duration: 0.4,
            ease: "power2.out"
          });
          
          gsap.to(icon, {
            scale: 1,
            rotation: 0,
            duration: 0.3,
            ease: "power2.out"
          });
        });
      });

      // üåü Floating geometric shapes animation
      gsap.to(".absolute.w-16", {
        rotation: 360,
        duration: 20,
        repeat: -1,
        ease: "none"
      });

      gsap.to(".absolute.w-12.rounded-full", {
        scale: 1.2,
        duration: 4,
        repeat: -1,
        yoyo: true,
        ease: "sine.inOut"
      });

      gsap.to(".absolute.w-8.rotate-12", {
        rotation: 45,
        duration: 8,
        repeat: -1,
        yoyo: true,
        ease: "sine.inOut"
      });
    }

    // üé≠ Project Modal Functions
    window.openProjectModal = function(projectData) {
      const modal = document.getElementById('project-modal');
      const title = document.getElementById('modal-title');
      const content = document.getElementById('modal-content');
      
      title.textContent = projectData.title;
      content.innerHTML = projectData.content;
      
      modal.style.pointerEvents = 'auto';
      gsap.to(modal, { opacity: 1, duration: 0.3 });
      gsap.to(modal.querySelector('.glass-mirror'), { scale: 1, duration: 0.3, delay: 0.1 });
    };

    window.closeProjectModal = function() {
      const modal = document.getElementById('project-modal');
      gsap.to(modal.querySelector('.glass-mirror'), { scale: 0.95, duration: 0.2 });
      gsap.to(modal, { 
        opacity: 0, 
        duration: 0.3, 
        delay: 0.1,
        onComplete: () => {
          modal.style.pointerEvents = 'none';
        }
      });
    };

    // Close modal on backdrop click
    document.getElementById('project-modal').addEventListener('click', (e) => {
      if (e.target === e.currentTarget) {
        closeProjectModal();
      }
    });
  });
</script>

<style>
  /* üé® Enhanced Project Card Styles */
  .project-card {
    position: relative;
    overflow: hidden;
    transition: all 0.4s ease;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  .project-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
    transition: left 0.8s ease;
    z-index: 1;
  }

  .project-card:hover::before {
    left: 100%;
  }

  /* üè∑Ô∏è Enhanced Tag Styles */
  .tag-alchemy {
    @apply text-xs px-3 py-1 bg-alchemy-100 dark:bg-alchemy-800 text-alchemy-700 dark:text-alchemy-300 rounded-full font-medium;
  }

  .tag-mirror {
    @apply text-xs px-3 py-1 bg-mirror-100 dark:bg-mirror-800 text-mirror-700 dark:text-mirror-300 rounded-full font-medium;
  }

  .tag-sage {
    @apply text-xs px-3 py-1 bg-sage-100 dark:bg-sage-800 text-sage-700 dark:text-sage-300 rounded-full font-medium;
  }

  .tag-flow {
    @apply text-xs px-3 py-1 bg-flow-100 dark:bg-flow-800 text-flow-700 dark:text-flow-300 rounded-full font-medium;
  }

  /* üåü Pulse animation for particles */
  @keyframes pulse {
    0%, 100% { opacity: 0.6; transform: scale(1); }
    50% { opacity: 1; transform: scale(1.2); }
  }

  /* üì± Responsive optimizations */
  @media (max-width: 768px) {
    .project-card {
      margin-bottom: 1rem;
    }
    
    .project-card .text-6xl {
      font-size: 3rem;
    }
  }

  /* ‚ôø Accessibility */
  @media (prefers-reduced-motion: reduce) {
    .project-card,
    .project-card::before,
    .animate-pulse {
      animation: none !important;
      transition: none !important;
    }
  }

  /* üåô Dark mode enhancements */
  @media (prefers-color-scheme: dark) {
    .project-card {
      border-color: rgba(255, 255, 255, 0.05);
    }
    
    .project-card::before {
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.05), transparent);
    }
  }

  /* üé≠ Modal styles */
  #project-modal .glass-mirror {
    max-height: 80vh;
    overflow-y: auto;
  }
</style>
